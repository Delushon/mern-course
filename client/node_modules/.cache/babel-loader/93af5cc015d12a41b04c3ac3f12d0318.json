{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{useHttp}from\"../hooks/http.hook\";import{AuthContext}from\"../context/AuthContext\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CreatePage=function CreatePage(){var history=useHistory();var auth=useContext(AuthContext);var _useHttp=useHttp(),request=_useHttp.request;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),link=_useState2[0],setLink=_useState2[1];useEffect(function(){window.M.updateTextFields();},[]);var pressHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(event.key==='Enter')){_context.next=10;break;}_context.prev=1;_context.next=4;return request('/api/link/generate','POST',{from:link},{Authorization:\"Bearer \".concat(auth.token)});case 4:data=_context.sent;history.push(\"/detail/\".concat(data.link._id));_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function pressHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col s8 offset-s2\",style:{paddingTop:'2rem'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0412\\u0441\\u0442\\u0430\\u0432\\u044C\\u0442\\u0435 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\",id:\"link\",type:\"text\",value:link,onChange:function onChange(e){return setLink(e.target.value);},onKeyPress:pressHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"link\",children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"})]})})});};","map":{"version":3,"sources":["C:/Users/pansh/Desktop/mern-course/client/src/pages/CreatePage.js"],"names":["React","useContext","useEffect","useState","useHttp","AuthContext","useHistory","CreatePage","history","auth","request","link","setLink","window","M","updateTextFields","pressHandler","event","key","from","Authorization","token","data","push","_id","paddingTop","e","target","value"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAAeC,UAAf,CAA2BC,SAA3B,CAAsCC,QAAtC,KAAqD,OAArD,CACA,OAAQC,OAAR,KAAsB,oBAAtB,CACA,OAAQC,WAAR,KAA0B,wBAA1B,CACA,OAAQC,UAAR,KAAyB,kBAAzB,C,wFAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CAC5B,GAAMC,CAAAA,OAAO,CAAGF,UAAU,EAA1B,CACA,GAAMG,CAAAA,IAAI,CAAGR,UAAU,CAACI,WAAD,CAAvB,CACA,aAAkBD,OAAO,EAAzB,CAAOM,OAAP,UAAOA,OAAP,CACA,cAAwBP,QAAQ,CAAC,EAAD,CAAhC,wCAAOQ,IAAP,eAAaC,OAAb,eAEAV,SAAS,CAAC,UAAM,CACZW,MAAM,CAACC,CAAP,CAASC,gBAAT,GACH,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMC,CAAAA,YAAY,0FAAG,iBAAMC,KAAN,gIACdA,KAAK,CAACC,GAAN,GAAc,OADA,iEAGUR,CAAAA,OAAO,CAAC,oBAAD,CAAuB,MAAvB,CAA+B,CAACS,IAAI,CAAER,IAAP,CAA/B,CAA6C,CAACS,aAAa,kBAAYX,IAAI,CAACY,KAAjB,CAAd,CAA7C,CAHjB,QAGHC,IAHG,eAITd,OAAO,CAACe,IAAR,mBAAwBD,IAAI,CAACX,IAAL,CAAUa,GAAlC,GAJS,mJAAH,kBAAZR,CAAAA,YAAY,4CAAlB,CAUA,mBACI,YAAK,SAAS,CAAC,KAAf,uBACI,YAAK,SAAS,CAAC,kBAAf,CAAkC,KAAK,CAAE,CAACS,UAAU,CAAE,MAAb,CAAzC,uBACI,aAAK,SAAS,CAAC,aAAf,wBACI,cAAO,WAAW,CAAC,uFAAnB,CACO,EAAE,CAAC,MADV,CAEO,IAAI,CAAC,MAFZ,CAGO,KAAK,CAAEd,IAHd,CAIO,QAAQ,CAAE,kBAAAe,CAAC,QAAId,CAAAA,OAAO,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,EAJlB,CAKO,UAAU,CAAEZ,YALnB,EADJ,cAOI,cAAO,OAAO,CAAC,MAAf,6FAPJ,GADJ,EADJ,EADJ,CAeH,CAnCM","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\"\r\nimport {useHttp} from \"../hooks/http.hook\";\r\nimport {AuthContext} from \"../context/AuthContext\";\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nexport const CreatePage = () => {\r\n    const history = useHistory()\r\n    const auth = useContext(AuthContext)\r\n    const {request} = useHttp()\r\n    const [link, setLink] = useState('')\r\n\r\n    useEffect(() => {\r\n        window.M.updateTextFields()\r\n    }, [])\r\n\r\n    const pressHandler = async event => {\r\n        if(event.key === 'Enter') {\r\n            try {\r\n                const data = await request('/api/link/generate', 'POST', {from: link}, {Authorization: `Bearer ${auth.token}`})\r\n                history.push(`/detail/${data.link._id}`)\r\n            } catch (e) {}\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s8 offset-s2\" style={{paddingTop: '2rem'}}>\r\n                <div className=\"input-field\">\r\n                    <input placeholder=\"Вставьте ссылку\"\r\n                           id=\"link\"\r\n                           type=\"text\"\r\n                           value={link}\r\n                           onChange={e => setLink(e.target.value)}\r\n                           onKeyPress={pressHandler}/>\r\n                    <label htmlFor=\"link\">Введите ссылку</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}