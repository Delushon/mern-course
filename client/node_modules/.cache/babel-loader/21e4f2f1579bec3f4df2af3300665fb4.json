{"ast":null,"code":"import _slicedToArray from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useCallback,useEffect}from\"react\";var storageName='userData';export var useAuth=function useAuth(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),ready=_useState4[0],setReady=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),userId=_useState6[0],setUserId=_useState6[1];var login=useCallback(function(jwtToken,id){setToken(jwtToken);setUserId(id);localStorage.setItem(storageName,JSON.stringify({userId:id,token:jwtToken}));},[]);var logout=useCallback(function(){setToken(null);setUserId(null);localStorage.removeItem(storageName);},[]);useEffect(function(){var data=JSON.parse(localStorage.getItem(storageName));if(data&&data.token){login(data.token,data.userId);}setReady(true);},[login]);return{login:login,logout:logout,token:token,userId:userId,ready:ready};};","map":{"version":3,"sources":["C:/Users/pansh/Desktop/mern-course/client/src/hooks/auth.hook.js"],"names":["useState","useCallback","useEffect","storageName","useAuth","token","setToken","ready","setReady","userId","setUserId","login","jwtToken","id","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem"],"mappings":"gKAAA,OAAQA,QAAR,CAAkBC,WAAlB,CAA+BC,SAA/B,KAA+C,OAA/C,CAEA,GAAMC,CAAAA,WAAW,CAAG,UAApB,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACzB,cAA0BJ,QAAQ,CAAC,IAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAA0BN,QAAQ,CAAC,KAAD,CAAlC,yCAAOO,KAAP,eAAcC,QAAd,eACA,eAA4BR,QAAQ,CAAC,IAAD,CAApC,yCAAOS,MAAP,eAAeC,SAAf,eAEA,GAAMC,CAAAA,KAAK,CAAGV,WAAW,CAAC,SAACW,QAAD,CAAWC,EAAX,CAAkB,CACxCP,QAAQ,CAACM,QAAD,CAAR,CACAF,SAAS,CAACG,EAAD,CAAT,CAEAC,YAAY,CAACC,OAAb,CAAqBZ,WAArB,CAAkCa,IAAI,CAACC,SAAL,CAAe,CAC7CR,MAAM,CAAEI,EADqC,CACjCR,KAAK,CAAEO,QAD0B,CAAf,CAAlC,EAGH,CAPwB,CAOtB,EAPsB,CAAzB,CAQA,GAAMM,CAAAA,MAAM,CAAGjB,WAAW,CAAC,UAAM,CAC7BK,QAAQ,CAAC,IAAD,CAAR,CACAI,SAAS,CAAC,IAAD,CAAT,CAEAI,YAAY,CAACK,UAAb,CAAwBhB,WAAxB,EACH,CALyB,CAKvB,EALuB,CAA1B,CAOAD,SAAS,CAAC,UAAM,CACZ,GAAMkB,CAAAA,IAAI,CAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqBnB,WAArB,CAAX,CAAb,CAEA,GAAIiB,IAAI,EAAIA,IAAI,CAACf,KAAjB,CAAwB,CACpBM,KAAK,CAACS,IAAI,CAACf,KAAN,CAAae,IAAI,CAACX,MAAlB,CAAL,CACH,CACDD,QAAQ,CAAC,IAAD,CAAR,CACH,CAPQ,CAON,CAACG,KAAD,CAPM,CAAT,CASA,MAAO,CAACA,KAAK,CAALA,KAAD,CAAQO,MAAM,CAANA,MAAR,CAAgBb,KAAK,CAALA,KAAhB,CAAuBI,MAAM,CAANA,MAAvB,CAA+BF,KAAK,CAALA,KAA/B,CAAP,CACH,CA9BM","sourcesContent":["import {useState, useCallback, useEffect} from \"react\"\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n    const [userId, setUserId] = useState(null)\r\n\r\n    const login = useCallback((jwtToken, id) => {\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n\r\n        localStorage.setItem(storageName, JSON.stringify({\r\n            userId: id, token: jwtToken\r\n        }))\r\n    }, [])\r\n    const logout = useCallback(() => {\r\n        setToken(null)\r\n        setUserId(null)\r\n\r\n        localStorage.removeItem(storageName)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n        if (data && data.token) {\r\n            login(data.token, data.userId)\r\n        }\r\n        setReady(true)\r\n    }, [login])\r\n\r\n    return {login, logout, token, userId, ready}\r\n}"]},"metadata":{},"sourceType":"module"}