{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useContext,useEffect,useState}from\"react\";import{useHttp}from\"../hooks/http.hook\";import{AuthContext}from\"../context/AuthContext\";import{Loader}from\"../components/Loader\";import{LinksList}from\"../components/LinksList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var LinksPage=function LinksPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),links=_useState2[0],setLinks=_useState2[1];var _useHttp=useHttp(),loading=_useHttp.loading,request=_useHttp.request;var _useContext=useContext(AuthContext),token=_useContext.token;var fetchLinks=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetched;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request('/api/link','GET',null,{Authorization:\"Bearer \".concat(token)});case 3:fetched=_context.sent;setLinks(fetched);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[token,request]);useEffect(function(){fetchLinks();},[fetchLinks]);if(loading){return/*#__PURE__*/_jsx(Loader,{});}return/*#__PURE__*/_jsx(_Fragment,{children:!loading&&/*#__PURE__*/_jsx(LinksList,{links:links})});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"LINKS PAGE\"})});};","map":{"version":3,"sources":["C:/Users/pansh/Desktop/mern-course/client/src/pages/LinksPage.js"],"names":["React","useCallback","useContext","useEffect","useState","useHttp","AuthContext","Loader","LinksList","LinksPage","links","setLinks","loading","request","token","fetchLinks","Authorization","fetched"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAAeC,WAAf,CAA4BC,UAA5B,CAAwCC,SAAxC,CAAmDC,QAAnD,KAAkE,OAAlE,CACA,OAAQC,OAAR,KAAsB,oBAAtB,CACA,OAAQC,WAAR,KAA0B,wBAA1B,CACA,OAAQC,MAAR,KAAqB,sBAArB,CACA,OAAQC,SAAR,KAAwB,yBAAxB,C,gGAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAC3B,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACA,aAA2BN,OAAO,EAAlC,CAAOO,OAAP,UAAOA,OAAP,CAAgBC,OAAhB,UAAgBA,OAAhB,CACA,gBAAgBX,UAAU,CAACI,WAAD,CAA1B,CAAOQ,KAAP,aAAOA,KAAP,CAEA,GAAMC,CAAAA,UAAU,CAAGd,WAAW,sEAAC,qLAEDY,CAAAA,OAAO,CAAC,WAAD,CAAc,KAAd,CAAqB,IAArB,CAA2B,CAACG,aAAa,kBAAYF,KAAZ,CAAd,CAA3B,CAFN,QAEjBG,OAFiB,eAGvBN,QAAQ,CAACM,OAAD,CAAR,CAHuB,iJAAD,GAK3B,CAACH,KAAD,CAAQD,OAAR,CAL2B,CAA9B,CAOAV,SAAS,CAAC,UAAM,CACZY,UAAU,GACb,CAFQ,CAEN,CAACA,UAAD,CAFM,CAAT,CAIA,GAAGH,OAAH,CAAY,CACR,mBAAO,KAAC,MAAD,IAAP,CACH,CAED,mBACI,yBACK,CAACA,OAAD,eAAY,KAAC,SAAD,EAAW,KAAK,CAAEF,KAAlB,EADjB,EADJ,CAMA,mBACI,kCACI,kCADJ,EADJ,CAKH,CA/BM","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from \"react\"\r\nimport {useHttp} from \"../hooks/http.hook\";\r\nimport {AuthContext} from \"../context/AuthContext\";\r\nimport {Loader} from \"../components/Loader\";\r\nimport {LinksList} from \"../components/LinksList\";\r\n\r\nexport const LinksPage = () => {\r\n    const [links, setLinks] = useState([])\r\n    const {loading, request} = useHttp()\r\n    const {token} = useContext(AuthContext)\r\n\r\n    const fetchLinks = useCallback(async () => {\r\n        try {\r\n            const fetched = await request('/api/link', 'GET', null, {Authorization: `Bearer ${token}`})\r\n            setLinks(fetched)\r\n        } catch (e) {}\r\n    }, [token, request])\r\n\r\n    useEffect(() => {\r\n        fetchLinks()\r\n    }, [fetchLinks])\r\n\r\n    if(loading) {\r\n        return <Loader />\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!loading && <LinksList links={links} /> }\r\n        </>\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <h1>LINKS PAGE</h1>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}