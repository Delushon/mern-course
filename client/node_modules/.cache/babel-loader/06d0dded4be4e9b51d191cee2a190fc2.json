{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/pansh/Desktop/mern-course/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{useHttp}from\"../hooks/http.hook\";import{useMessage}from\"../hooks/message.hook\";import{AuthContext}from\"../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var AuthPage=function AuthPage(){var auth=useContext(AuthContext);var message=useMessage();var _useHttp=useHttp(),loading=_useHttp.loading,request=_useHttp.request,error=_useHttp.error,clearError=_useHttp.clearError;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];useEffect(function(){message(error);clearError();},[error,message,clearError]);useEffect(function(){window.M.updateTextFields();},[]);var changeHandler=function changeHandler(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};var registerHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request('/api/auth/register','POST',_objectSpread({},form));case 3:data=_context.sent;console.log(data);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function registerHandler(){return _ref.apply(this,arguments);};}();var loginHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return request('/api/auth/login','POST',_objectSpread({},form));case 3:data=_context2.sent;auth.login(data.token,data.userId);_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function loginHandler(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col s6 offset-s3\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0421\\u043E\\u043A\\u0440\\u0430\\u0442\\u0438 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card blue darken-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content white-text\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-title\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 email\",id:\"email\",type:\"text\",name:\"email\",className:\"yellow-input\",value:form.email,onChange:changeHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",id:\"password\",type:\"password\",name:\"password\",className:\"yellow-input\",value:form.password,onChange:changeHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-action\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:loginHandler,disabled:loading,className:\"btn yellow darken-4\",style:{marginRight:10},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{onClick:registerHandler,disabled:loading,className:\"btn grey lighten-1 black-text\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})]})]})]})});};","map":{"version":3,"sources":["C:/Users/pansh/Desktop/mern-course/client/src/pages/AuthPage.js"],"names":["React","useContext","useEffect","useState","useHttp","useMessage","AuthContext","AuthPage","auth","message","loading","request","error","clearError","email","password","form","setForm","window","M","updateTextFields","changeHandler","event","target","name","value","registerHandler","data","console","log","loginHandler","login","token","userId","marginRight"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\"\r\nimport {useHttp} from \"../hooks/http.hook\"\r\nimport {useMessage} from \"../hooks/message.hook\";\r\nimport {AuthContext} from \"../context/AuthContext\";\r\n\r\nexport const AuthPage = () => {\r\n    const auth = useContext(AuthContext)\r\n    const message = useMessage()\r\n    const {loading, request, error, clearError} = useHttp()\r\n    const [form, setForm] = useState({\r\n        email: '', password: ''\r\n    })\r\n\r\n    useEffect(() => {\r\n        message(error)\r\n        clearError()\r\n    }, [error, message, clearError])\r\n\r\n    useEffect(() => {\r\n        window.M.updateTextFields()\r\n    }, [])\r\n\r\n    const changeHandler = event => {\r\n        setForm({ ...form, [event.target.name]: event.target.value })\r\n    }\r\n\r\n    const registerHandler = async () => {\r\n        try {\r\n            const data = await request('/api/auth/register', 'POST', {...form})\r\n            console.log(data)\r\n        } catch (e) {\r\n\r\n        }\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            const data = await request('/api/auth/login', 'POST', {...form})\r\n            auth.login(data.token, data.userId)\r\n        } catch (e) {\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s6 offset-s3\">\r\n                <h1>Сократи ссылку</h1>\r\n                <div className=\"card blue darken-1\">\r\n                    <div className=\"card-content white-text\">\r\n                        <span className=\"card-title\">Авторизация</span>\r\n                        <div>\r\n\r\n                            <div className=\"input-field\">\r\n                                <input placeholder=\"Введите email\"\r\n                                       id=\"email\"\r\n                                       type=\"text\"\r\n                                       name=\"email\"\r\n                                       className=\"yellow-input\"\r\n                                       value={form.email}\r\n                                       onChange={changeHandler}/>\r\n                                    <label htmlFor=\"email\">Email</label>\r\n                            </div>\r\n\r\n                            <div className=\"input-field\">\r\n                                <input placeholder=\"Введите пароль\"\r\n                                       id=\"password\"\r\n                                       type=\"password\"\r\n                                       name=\"password\"\r\n                                       className=\"yellow-input\" value={form.password}\r\n                                       onChange={changeHandler}/>\r\n                                <label htmlFor=\"password\">Пароль</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-action\">\r\n                        <button onClick={loginHandler} disabled={loading} className=\"btn yellow darken-4\" style={{marginRight: 10}}>Войти</button>\r\n                        <button onClick={registerHandler} disabled={loading} className=\"btn grey lighten-1 black-text\">Регистрация</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}